<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Doodle-Doodle</title>
  <script src="../../helping_functions.js"></script>
  <script src="../../variables.js"></script>
  <script src="../../semantic_cube.js"></script>
  <!-- <script src="../../blockly_compressed.js"></script> -->
  <!-- <script src="../../blocks_compressed.js"></script> -->
  <script src="../../blockly_uncompressed.js"></script>
  <script src="../../blocks/begin_end.js"></script>
  <script src="../../blocks/conditions.js"></script>
  <script src="../../blocks/functions.js"></script>
  <script src="../../blocks/loops.js"></script>
  <script src="../../blocks/movements.js"></script>
  <script src="../../blocks/operations.js"></script>
  <script src="../../blocks/print.js"></script>
  <script src="../../blocks/variables_and_constants.js"></script>
  <!-- <script src="../../javascript_compressed.js"></script> -->
  <script src="../../generators/javascript.js"></script>
  <script src="../../generators/javascript/begin_end.js"></script>
  <script src="../../generators/javascript/conditions.js"></script>
  <script src="../../generators/javascript/functions.js"></script>
  <script src="../../generators/javascript/loops.js"></script>
  <script src="../../generators/javascript/movements.js"></script>
  <script src="../../generators/javascript/operations.js"></script>
  <script src="../../generators/javascript/print.js"></script>
  <script src="../../generators/javascript/variables_and_constants.js"></script>
  <script src="../../msg/messages.js"></script>
  <script src="../../redefined.js" charset="utf-8"></script>
  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</head>
<body>
  <h1>Welcome to Doodle-Doodle</h1>

  <p>This is a graphic input programming language developed to help people learn the basics of programming</p>

  <p>
    <button onclick="showCode()">Show JavaScript</button>
  </p>

  <div id="blocklyDiv" style="height: 600px; width: 1000px;"></div>

  <xml id="toolbox" style="display: none">
    <category name="Begin">
      <block type="begin_end"></block>
    </category>

    <category name="Variables and Constants">
      <block type="factor"></block>
      <block type="var"></block>
    </category>

    <category name="Movements">
      <block type="move"></block>
      <block type="turn"></block>
      <block type="wall_in_front"></block>
    </category>

    <category name="Conditions">
      <block type="if"></block>
      <block type="if_else"></block>
      <block type="equal_to"></block>
      <block type="less_than"></block>
      <block type="greater_than"></block>
      <block type="less_than_or_equal_to"></block>
      <block type="greater_than_or_equal_to"></block>
      <block type="not_equal_to"></block>
      <block type="and"></block>
      <block type="or"></block>
    </category>

    <category name="Loops">
      <block type="repeat"></block>
      <block type="while"></block>
      <block type="do_while"></block>
    </category>

    <category name="Operations">
      <block type="assignation"></block>
      <block type="sum"></block>
      <block type="substraction"></block>
      <block type="division"></block>
      <block type="multiplication"></block>
    </category>

    <category name="Functions">
      <block type="def_function"></block>
      <block type="call_function"></block>
      <block type="return_function"></block>
      <block type="param"></block>
      <block type="no_params"></block>
      <block type="return_value"></block>
      <block type="return"></block>
    </category>

    <category name="Print">
      <block type="print"></block>
      <block type="say"></block>
    </category>
  </xml>

  <xml id="startBlocks" style="display: none">
    <block type="begin_end" inline="false" x="100" y="20"></block>
  </xml>

  <script>
    var workspace = Blockly.inject('blocklyDiv',
        {media: '../../media/',
         toolbox: document.getElementById('toolbox')});
    Blockly.Xml.domToWorkspace(workspace,
        document.getElementById('startBlocks'));

    function showCode() {
      // Generate JavaScript code and display it.
      pre_compilation = true;
      startCompilation();
      Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
      var code = Blockly.JavaScript.workspaceToCode(workspace);
      pre_compilation = false;
      code = Blockly.JavaScript.workspaceToCode(workspace);
      checkFunctionCalls();
      alert(code);
    }
  </script>

</body>
</html>
